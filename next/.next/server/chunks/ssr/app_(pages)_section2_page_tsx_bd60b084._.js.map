{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/galileor/Development/gefami-test/next/app/%28pages%29/section2/page.tsx"],"sourcesContent":["'use client'\nimport React, { useState } from 'react'\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport {  Table,  TableHeader,  TableBody,  TableColumn,  TableRow,  TableCell} from \"@heroui/table\";\nimport { Button } from '@heroui/react';\nimport {  Modal,  ModalContent,  ModalHeader,  ModalBody,  ModalFooter, useDisclosure} from \"@heroui/modal\";\nimport { addToast } from \"@heroui/toast\";\nimport { Post } from '../../types';\n\nexport default function Section2() {\n    const {isOpen, onOpen, onClose, onOpenChange} = useDisclosure()\n    const [selectedPostId, setSelectedPostId] = useState<number | null>(null)\n    const queryClient = useQueryClient()\n    \n    const { data, isLoading, error } = useQuery({\n        queryKey: ['products'],\n        queryFn: async () => {\n            const response = await fetch('https://jsonplaceholder.typicode.com/posts?_limit=10')\n            const posts = await response.json()\n            return posts.map((post: Post) => ({\n                id: post.id,\n                title: post.title,\n                body: post.body\n            }))\n        }\n    })\n\n    const deleteMutation = useMutation({\n        mutationFn: async (postId: number) => {\n            const response = await fetch(`https://jsonplaceholder.typicode.com/posts/${postId}`, {\n                method: 'DELETE',\n            })\n            if (!response.ok) {\n                throw new Error('Failed to delete post')\n            }\n            return response.json()\n        },\n        onSuccess: (data, postId) => {\n            //  optimistic update \n            queryClient.setQueryData(['products'], (oldData: Post[]) => {\n                return oldData?.filter(post => post.id !== postId) || []\n            })\n            onClose()\n            addToast({\n                title: 'Post deleted',\n                description: 'The post has been deleted successfully',\n                color: 'success',\n            })\n        },\n        onError: (error) => {\n            console.error('Error deleting post:', error)\n            addToast({\n                title: 'Error',\n                description: 'Failed to delete post',\n                color: 'danger',\n            })\n        }\n    })\n\n    const handleDeleteClick = (postId: number) => {\n        setSelectedPostId(postId)\n        onOpen()\n    }\n\n    const handleConfirmDelete = () => {\n        if (selectedPostId) {\n            deleteMutation.mutate(selectedPostId)\n        }\n    }\n\n    if (isLoading) return <div>Loading...</div>\n    if (error) return <div>Error loading data</div>\n\n  return (\n    <div className=\"p-10 bg-gray-100 h-dvh\">\n     <Table>\n       <TableHeader>\n          <TableColumn>ID</TableColumn>\n          <TableColumn>TITLE</TableColumn>\n          <TableColumn>BODY</TableColumn>\n          <TableColumn>ACTIONS</TableColumn>\n        </TableHeader>\n        <TableBody>\n          {data?.map((post: Post) => (\n            <TableRow key={post.id}>\n              <TableCell>{post.id}</TableCell>\n              <TableCell>{post.title}</TableCell>\n              <TableCell>{post.body}</TableCell>\n              <TableCell>\n                <Button \n                    color=\"danger\" \n                    variant=\"solid\"\n                    onPress={() => handleDeleteClick(post.id)}\n                    isLoading={deleteMutation.isPending}\n                >\n                    Delete\n                </Button>\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n     </Table>\n     <Modal isOpen={isOpen} onOpenChange={onOpenChange}>\n        <ModalContent>\n            <ModalHeader>\n                <h1>Confirmation</h1>\n            </ModalHeader>\n            <ModalBody>\n                <p>Are you sure you want to delete this post?</p>\n            </ModalBody>\n            <ModalFooter>\n                <Button color=\"danger\" variant=\"solid\" onPress={handleConfirmDelete}>\n                    Delete\n                </Button>\n                <Button color=\"default\" variant=\"solid\" onPress={onClose}>\n                    Cancel\n                </Button>\n            </ModalFooter>\n        </ModalContent>\n     </Modal>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}