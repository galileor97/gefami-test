{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/galileor/Development/gefami-test/next/app/%28pages%29/section2/page.tsx"],"sourcesContent":["'use client'\nimport React, { useState } from 'react'\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport {  Table,  TableHeader,  TableBody,  TableColumn,  TableRow,  TableCell} from \"@heroui/table\";\nimport { Button } from '@heroui/react';\nimport {  Modal,  ModalContent,  ModalHeader,  ModalBody,  ModalFooter, useDisclosure} from \"@heroui/modal\";\nimport { addToast } from \"@heroui/toast\";\nimport { Post } from '../../types';\n\nexport default function Section2() {\n    const {isOpen, onOpen, onClose, onOpenChange} = useDisclosure()\n    const [selectedPostId, setSelectedPostId] = useState<number | null>(null)\n    const queryClient = useQueryClient()\n    \n    const { data, isLoading, error } = useQuery({\n        queryKey: ['products'],\n        queryFn: async () => {\n            const response = await fetch('https://jsonplaceholder.typicode.com/posts?_limit=10')\n            const posts = await response.json()\n            return posts.map((post: Post) => ({\n                id: post.id,\n                title: post.title,\n                body: post.body\n            }))\n        }\n    })\n\n    const deleteMutation = useMutation({\n        mutationFn: async (postId: number) => {\n            const response = await fetch(`https://jsonplaceholder.typicode.com/posts/${postId}`, {\n                method: 'DELETE',\n            })\n            if (!response.ok) {\n                throw new Error('Failed to delete post')\n            }\n            return response.json()\n        },\n        onSuccess: (data, postId) => {\n            //  optimistic update \n            queryClient.setQueryData(['products'], (oldData: Post[]) => {\n                return oldData?.filter(post => post.id !== postId) || []\n            })\n            onClose()\n            addToast({\n                title: 'Post deleted',\n                description: 'The post has been deleted successfully',\n                color: 'success',\n            })\n        },\n        onError: (error) => {\n            console.error('Error deleting post:', error)\n            addToast({\n                title: 'Error',\n                description: 'Failed to delete post',\n                color: 'danger',\n            })\n        }\n    })\n\n    const handleDeleteClick = (postId: number) => {\n        setSelectedPostId(postId)\n        onOpen()\n    }\n\n    const handleConfirmDelete = () => {\n        if (selectedPostId) {\n            deleteMutation.mutate(selectedPostId)\n        }\n    }\n\n    if (isLoading) return <div>Loading...</div>\n    if (error) return <div>Error loading data</div>\n\n  return (\n    <div className=\"p-10 bg-gray-100 h-dvh\">\n     <Table>\n       <TableHeader>\n          <TableColumn>ID</TableColumn>\n          <TableColumn>TITLE</TableColumn>\n          <TableColumn>BODY</TableColumn>\n          <TableColumn>ACTIONS</TableColumn>\n        </TableHeader>\n        <TableBody>\n          {data?.map((post: Post) => (\n            <TableRow key={post.id}>\n              <TableCell>{post.id}</TableCell>\n              <TableCell>{post.title}</TableCell>\n              <TableCell>{post.body}</TableCell>\n              <TableCell>\n                <Button \n                    color=\"danger\" \n                    variant=\"solid\"\n                    onPress={() => handleDeleteClick(post.id)}\n                    isLoading={deleteMutation.isPending}\n                >\n                    Delete\n                </Button>\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n     </Table>\n     <Modal isOpen={isOpen} onOpenChange={onOpenChange}>\n        <ModalContent>\n            <ModalHeader>\n                <h1>Confirmation</h1>\n            </ModalHeader>\n            <ModalBody>\n                <p>Are you sure you want to delete this post?</p>\n            </ModalBody>\n            <ModalFooter>\n                <Button color=\"danger\" variant=\"solid\" onPress={handleConfirmDelete}>\n                    Delete\n                </Button>\n                <Button color=\"default\" variant=\"solid\" onPress={onClose}>\n                    Cancel\n                </Button>\n            </ModalFooter>\n        </ModalContent>\n     </Modal>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}